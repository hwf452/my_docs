$(function(){var a,b,c,d;zhiyou_open?(a={redirect_url:encodeURIComponent(window.location.href)},zhiyou_relate.popup_login_init(a)):(login(),register()),b={resizeWindow:function(a){window.innerHeight?winHeight=window.innerHeight:document.body&&document.body.clientHeight&&(winHeight=document.body.clientHeight);var c=(winHeight-$(a).height())/2;$(a).css("top",c),window.onresize=function(){b.resizeWindow(a)}},alert:function(a,c,d){b.showBoxy("alert",a,c,d)},confirm:function(a,c,d){b.showBoxy("confirm",a,c,d)},tips:function(a,c,d){b.showBoxy("tips",a,c,d)},destroy:function(){$(".pop_main_box").css("display","none")},showBoxy:function(a,c,d,e){switch(b.coverInit(),a){case"alert":b.getAlert(c,d,e),b.resizeWindow(".smzdm_boxy_alert");break;case"confirm":break;case"tips":b.getTips(c,d,e),b.resizeWindow(".smzdm_boxy_tips")}},hideBoxy:function(a){a.click(function(){$("#boxyCover").hide(),$(this).parent().hide()})},getAlert:function(a,c,d){var f,g;return"destroy"==a?($(".smzdm_boxy_alert").remove(),$("#boxyCover").remove(),!1):(f="undefined"==typeof d.title?"":d.title,g='<div class="pop pop_main_box smzdm_boxy_alert" style="margin-left: -240px; top: 30%;display:none;"><i class="pop-close icon-cross-lighter"><!--[if lt IE 8]>x<![endif]--></i><div class="pop-title"><div class="pop_name">'+f+"</div>"+"</div>"+"<!-- pop-content -->"+'<div class="pop-content">'+a+"</div>"+"<!-- pop-content end -->"+"</div>",$(".smzdm_boxy_alert").remove(),$("body").append(g),$("#boxyCover").show(),$(".smzdm_boxy_alert").css("display","block"),c&&c(),b.hideBoxy($(".smzdm_boxy_alert").find(".pop-close")),$("#boxyCover").click(function(){b.alert("destroy")}),void 0)},getTips:function(a,c,d){var e,f;return"destroy"==a?($(".smzdm_boxy_tips").remove(),$("#boxyCover").remove(),!1):(e="","success"==d.type?e='<i class="icon-loginright"><!--[if lt IE 8]>√<![endif]--></i>':"error"==d.type&&(e='<i class="icon-logintanhao"><!--[if lt IE 8]>404<![endif]--></i>'),f='<div class="pop pop_no_title  smzdm_boxy_tips" style="margin-left: -155px; top: 30%;display:none;"><i class="pop-close icon-cross-lighter"><!--[if lt IE 8]>x<![endif]--></i><div class="pop-content oneLine">'+e+'<p class="pop_info">'+a+"</p>"+"</div>"+"</div>",$(".smzdm_boxy_tips").remove(),$("body").append(f),$("#boxyCover").show(),$(".smzdm_boxy_tips").css("display","block"),c&&c(),b.hideBoxy($(".smzdm_boxy_tips").find(".pop-close")),$("#boxyCover").click(function(){b.tips("destroy")}),void 0)},coverInit:function(){$("body").find("#boxyCover").remove(),$("body").append('<div id="boxyCover"></div>'),$("#boxyCover").css({background:"#000 none repeat scroll 0 0",display:"none",height:"100%",left:0,opacity:.5,position:"fixed",top:0,width:"100%","z-index":9999})}},c={getStrLength:function(a){var b=0;return b=null==a.match(/[^ -~]/g)?a.length:a.length+a.match(/[^ -~]/g).length}},d={selectType:function(){$('input[name="report"]').click(function(){$(".textarea_jubao").attr("placeholder",$(this).attr("data-remark"))})},selectedType:function(){$('input[name="report"][data-checked="1"]').trigger("click")},insertContent:function(){$(".textarea_jubao").on("input",function(){var a=$(this).val(),b=c.getStrLength(a);$(".min_num").html(b),$(".insert_notice").css("display","block"),10>b?($(".min_num").css("color","red"),$(".max_num").css("color","#666666"),$(".length_notice").css("color","red")):b>200?($(".min_num").css("color","#666666"),$(".max_num").css("color","red"),$(".length_notice").css("color","red")):($(".min_num").css("color","#666666"),$(".max_num").css("color","#666666"),$(".length_notice").css("color","666666"))})},sendReport:function(){$(".btn_report").click(function(){var a=$('input[name="report"]:checked').val(),d=$(".textarea_jubao").val(),e=c.getStrLength(d);return 10>e?!1:e>200?!1:($.ajax({type:"post",url:smzdm_post+"/ajax_report",data:{article_id:$("#articleID").val(),type:a,content:d},dataType:"json",success:function(a){b.alert("destroy"),null==a&&b.tips("举报提交失败<span data-type='1'></span>",function(){},{type:"error"}),"undefined"==typeof a.error_code&&b.tips("举报提交失败<span data-type='2'></span>",function(){},{type:"error"}),0==a.error_code?b.tips("感谢您的举报，小编会尽快审核给您满意的答复…<span data-type='3'></span>",function(){},{type:"success"}):b.tips(a.error_msg+"<span data-type='4'></span>",function(){},{type:"error"})},error:function(){b.tips("很抱歉，网络出了点小差，刷新页面之后再试一下<span data-type='5'></span>",function(){},{type:"error"})}}),void 0)})},reportBoxTitle:function(){return"文章举报"},getReportBox:function(){$("#report").click(function(){$.ajax({type:"post",url:smzdm_post+"/ajax_report_box",data:{},dataType:"json",success:function(a){null==a&&b.tips("很抱歉，网络出了点小差，刷新页面之后再试一下<span data-type='1'></span>",function(){},{type:"error"}),"undefined"==typeof a.error_code&&b.tips("很抱歉，网络出了点小差，刷新页面之后再试一下<span data-type='2'></span>",function(){},{type:"error"}),0==a.error_code?b.alert(a.data,function(){d.selectType(),d.selectedType(),d.insertContent(),d.sendReport()},{title:d.reportBoxTitle()}):b.tips("很抱歉，网络出了点小差，刷新页面之后再试一下<span data-type='3'></span>",function(){},{type:"error"})},error:function(){b.tips("很抱歉，网络出了点小差，刷新页面之后再试一下<span data-type='4'></span>",function(){},{type:"error"})}})})}},d.getReportBox()});