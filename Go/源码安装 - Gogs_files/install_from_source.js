document.write("<h1>源码安装</h1>\n\n<h2>安装依赖</h2>\n\n<h3>基本依赖</h3>\n\n<ul>\n<li><a href=\"http://golang.org\">Go 语言</a>：版本 &gt;= 1.6</li>\n</ul>\n\n<h2>安装 Go 语言</h2>\n\n<p>如果您的系统已经安装要求版本的 Go 语言，可以跳过此小节。</p>\n\n<h3>下载</h3>\n\n<p>您可以通过以下方式安装 Go 语言到 <code>/home/git/local/go</code> 目录：</p>\n<pre><code class=\"language-sh\">sudo su - git\ncd ~\n# create a folder to install 'go'\nmkdir local\n# Download go (change go$VERSION.$OS-$ARCH.tar.gz to the latest release)\nwget https://storage.googleapis.com/golang/go$VERSION.$OS-$ARCH.tar.gz\n# expand it to ~/local\ntar -C /home/git/local -xzf go$VERSION.$OS-$ARCH.tar.gz\n</code></pre>\n\n<h3>设置环境</h3>\n\n<p>请设置和您系统环境对应的路径：</p>\n<pre><code class=\"language-sh\">sudo su - git\ncd ~\necho 'export GOROOT=$HOME/local/go' &gt;&gt; $HOME/.bashrc\necho 'export GOPATH=$HOME/go' &gt;&gt; $HOME/.bashrc\necho 'export PATH=$PATH:$GOROOT/bin:$GOPATH/bin' &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre>\n\n<h2>安装 Gogs</h2>\n\n<p>常用的安装方式：</p>\n<pre><code class=\"language-sh\"># 下载并安装依赖\n$ go get -u github.com/gogs/gogs\n\n# 构建主程序\n$ cd $GOPATH/src/github.com/gogs/gogs\n$ go build\n</code></pre>\n\n<h3>构建 <code>develop</code> 分支版本</h3>\n\n<p>如果您想要安装 <code>develop</code>（或其它）分支版本，则可以通过以下命令：</p>\n<pre><code class=\"language-sh\">$ mkdir -p $GOPATH/src/github.com/gogs\n$ cd $GOPATH/src/github.com/gogs\n\n# 请确保没有使用 “https://github.com/gogs/gogs.git”\n$ git clone --depth=1 -b develop https://github.com/gogs/gogs\n$ cd gogs\n$ go build\n</code></pre>\n\n<h3>测试安装</h3>\n\n<p>您可以通过以下方式检查 Gogs 是否可以正常工作：</p>\n<pre><code class=\"language-sh\">cd $GOPATH/src/github.com/gogs/gogs\n./gogs web\n</code></pre>\n\n<p>如果您没有发现任何错误信息，则可以使用 <code>Ctrl-C</code> 来终止运行。</p>\n\n<h3>使用标签构建</h3>\n\n<p>Gogs 默认并没有支持一些功能，这些功能需要在构建时明确使用构建标签（<a href=\"https://golang.org/pkg/go/build/#hdr-Build_Constraints\">build tags</a>）来支持。</p>\n\n<p>目前使用标签构建的功能如下：</p>\n\n<ul>\n<li><code>sqlite3</code>：SQLite3 数据库支持</li>\n<li><code>pam</code>：PAM 授权认证支持</li>\n<li><code>cert</code>：生成自定义证书支持</li>\n<li><code>miniwinsvc</code>：Windows 服务内置支持（或者您可以使用 NSSM 来创建服务）</li>\n</ul>\n\n<p>例如，您需要支持以上所有功能，则需要先删除 <code>$GOPATH/pkg/{GOOS_GOARCH}/github.com/gogs/gogs</code> 目录，然后执行以下命令：</p>\n<pre><code class=\"language-sh\">$ go get -u -tags &quot;sqlite pam cert&quot; github.com/gogs/gogs\n$ cd $GOPATH/src/github.com/gogs/gogs\n$ go build -tags &quot;sqlite pam cert&quot;\n</code></pre>\n\n<p>安装完成后可继续参照 <a href=\"configuration_and_run.html\">配置与运行</a>。</p>\n")