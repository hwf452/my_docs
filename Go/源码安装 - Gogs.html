<!DOCTYPE html>
<html><head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="description" content="Gogs is a painless self-hosted Git service.">

		<link rel="shortcut icon" href="https://gogs.io/img/favicon.ico">
		<link href="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/semantic.css" rel="stylesheet">
		<link href="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/peach.css" rel="stylesheet">

		
			<link href="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/my.css" rel="stylesheet">
		

		
			<script async="" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/analytics.js"></script><script src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/jquery-1.js"></script>
		
		
		<script type="text/javascript" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/semantic.js"></script>
		<script type="text/javascript" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/emojify-1.js"></script>
		<script type="text/javascript" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/peach.js"></script>

		
			<link rel="stylesheet" href="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/default.css">
		
		<script src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/highlight-8.js"></script>

		<title>源码安装 - Gogs</title>
	<script id="_carbonads_projs" type="text/javascript" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/CKYILK3U.json"></script></head>
	<body>
		
	<div class="ui inverted vertical center aligned segment">
		<div class="ui container">
  <div class="ui large secondary inverted menu">
    
    <a class=" item" href="https://gogs.io/">首页</a>
    
    <a class=" item" href="https://dl.gogs.io/">下载安装</a>
    
    <a class=" item" href="https://gogs.io/docs">使用文档</a>
    
    <a class=" item" href="https://github.com/gogs/gogs" target="_blank"><i class="github icon"></i> GitHub</a>
    
    <div class="right item">
      
      <div class="ui language floating dropdown link item" tabindex="0">
        <i class="world icon"></i>
        <div class="text">简体中文</div>
        <div class="menu" tabindex="-1">
          
          <a class="item active selected" href="https://gogs.io/docs/installation/install_from_source?lang=zh-CN">简体中文</a>
          
          <a class="item" href="https://gogs.io/docs/installation/install_from_source?lang=en-US">English</a>
          
          <a class="item" href="https://gogs.io/docs/installation/install_from_source?lang=fr-FR">Français</a>
          
          <a class="item" href="https://gogs.io/docs/installation/install_from_source?lang=de-DE">Deutsch</a>
          
        </div>
      </div>
    </div>
  </div>
</div>
	</div>
	<div class="ui grid documentation container">
		<div class="four wide column">
			<div class="ui vertical menu">
				<script async="" type="text/javascript" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/carbon.js" id="_carbonads_js"></script><div id="carbonads"><span><span class="carbon-wrap"><a href="https://srv.carbonads.net/ads/click/x/GTND42QICKBIC23WCT7LYKQMCK7IV2QICWYDPZ3JCW7ICK7WCAYIT2JKC6BICK7MC6SI6K3EHJNCLSIZ?segment=placement:gogsio;" class="carbon-img" target="_blank" rel="noopener"><img src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/1525189887-61450.png" alt="" style="max-width: 130px;" width="130" height="100" border="0"></a><a href="https://srv.carbonads.net/ads/click/x/GTND42QICKBIC23WCT7LYKQMCK7IV2QICWYDPZ3JCW7ICK7WCAYIT2JKC6BICK7MC6SI6K3EHJNCLSIZ?segment=placement:gogsio;" class="carbon-text" target="_blank" rel="noopener">Students and Teachers, save up to 60% on Adobe Creative Cloud.</a></span><a href="http://carbonads.net/?utm_source=gogsio&amp;utm_medium=ad_via_link&amp;utm_campaign=in_unit&amp;utm_term=carbon" class="carbon-poweredby" target="_blank" rel="noopener">ads via Carbon</a></span></div>
				
					
				  <div class="item">
				  	
				    	<a class="header" href="https://gogs.io/docs/intro">简介</a>
				    
				    <div class="menu">
				    	
				    		
				      	<a class="item " href="https://gogs.io/docs/intro/change_log">变更日志</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/intro/troubleshooting">故障排查</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/intro/faqs">常见问题</a>
				      	
				      
				    </div>
				  </div>
				  
				  <div class="item">
				  	
				    	<a class="header" href="https://gogs.io/docs/installation">下载安装</a>
				    
				    <div class="menu">
				    	
				    		
				      	<a class="item " href="https://gogs.io/docs/installation/install_from_binary">二进制安装</a>
				      	
				      
				    		
				      	<a class="item current" href="https://gogs.io/docs/installation/install_from_source">源码安装</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/installation/install_from_packages">包管理安装</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/installation/run_as_windows_service">注册 Windows 服务</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/installation/configuration_and_run">配置与运行</a>
				      	
				      
				    </div>
				  </div>
				  
				  <div class="item">
				  	
				    	<div class="header">版本升级</div>
				    
				    <div class="menu">
				    	
				    		
				      	<a class="item " href="https://gogs.io/docs/upgrade/upgrade_from_binary">二进制升级</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/upgrade/upgrade_from_source">源码升级</a>
				      	
				      
				    </div>
				  </div>
				  
				  <div class="item">
				  	
				    	<div class="header">功能介绍</div>
				    
				    <div class="menu">
				    	
				    		
				      	<a class="item " href="https://gogs.io/docs/features/custome_template">自定义模板</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/features/webhook">Web 钩子</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/features/authentication">授权认证</a>
				      	
				      
				    		
				      	<a class="item " href="https://gogs.io/docs/features/i18n">多国语言支持</a>
				      	
				      
				    </div>
				  </div>
				  
				  <div class="item">
				  	
				    	<div class="header">高级用法</div>
				    
				    <div class="menu">
				    	
				    		
				      	<a class="item " href="https://gogs.io/docs/advanced/configuration_cheat_sheet">配置文件手册</a>
				      	
				      
				    		
				      
				    		
				      
				    </div>
				  </div>
				  
				
			</div>
		</div>

		<div class="twelve wide column">
			<div class="ui markdown segment">
				
				
				  <a class="ui blue button" id="edit_page" href="https://github.com/gogs/docs/blob/master/zh-CN/installation/install_from_source.md">编辑本页内容</a>
				
				<script type="text/javascript" src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/install_from_source.js"></script><h1>源码安装</h1>

<div id="%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96" class="anchor-wrap"><h2>安装依赖<a class="anchor" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="octicon octicon-link"></span></a></h2></div>

<div id="%E5%9F%BA%E6%9C%AC%E4%BE%9D%E8%B5%96" class="anchor-wrap"><h3>基本依赖<a class="anchor" href="#%E5%9F%BA%E6%9C%AC%E4%BE%9D%E8%B5%96"><span class="octicon octicon-link"></span></a></h3></div>

<ul>
<li><a href="http://golang.org/">Go 语言</a>：版本 &gt;= 1.6</li>
</ul>

<div id="%E5%AE%89%E8%A3%85-go-%E8%AF%AD%E8%A8%80" class="anchor-wrap"><h2>安装 Go 语言<a class="anchor" href="#%E5%AE%89%E8%A3%85-go-%E8%AF%AD%E8%A8%80"><span class="octicon octicon-link"></span></a></h2></div>

<p>如果您的系统已经安装要求版本的 Go 语言，可以跳过此小节。</p>

<div id="%E4%B8%8B%E8%BD%BD" class="anchor-wrap"><h3>下载<a class="anchor" href="#%E4%B8%8B%E8%BD%BD"><span class="octicon octicon-link"></span></a></h3></div>

<p>您可以通过以下方式安装 Go 语言到 <code>/home/git/local/go</code> 目录：</p>
<pre><code class="language-sh hljs bash">sudo su - git
<span class="hljs-built_in">cd</span> ~
<span class="hljs-comment"># create a folder to install 'go'</span>
mkdir <span class="hljs-built_in">local</span>
<span class="hljs-comment"># Download go (change go$VERSION.$OS-$ARCH.tar.gz to the latest release)</span>
wget https://storage.googleapis.com/golang/go<span class="hljs-variable">$VERSION</span>.<span class="hljs-variable">$OS</span>-<span class="hljs-variable">$ARCH</span>.tar.gz
<span class="hljs-comment"># expand it to ~/local</span>
tar -C /home/git/<span class="hljs-built_in">local</span> -xzf go<span class="hljs-variable">$VERSION</span>.<span class="hljs-variable">$OS</span>-<span class="hljs-variable">$ARCH</span>.tar.gz
</code></pre>

<div id="%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83" class="anchor-wrap"><h3>设置环境<a class="anchor" href="#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="octicon octicon-link"></span></a></h3></div>

<p>请设置和您系统环境对应的路径：</p>
<pre><code class="language-sh hljs bash">sudo su - git
<span class="hljs-built_in">cd</span> ~
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export GOROOT=$HOME/local/go'</span> &gt;&gt; <span class="hljs-variable">$HOME</span>/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export GOPATH=$HOME/go'</span> &gt;&gt; <span class="hljs-variable">$HOME</span>/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export PATH=$PATH:$GOROOT/bin:$GOPATH/bin'</span> &gt;&gt; <span class="hljs-variable">$HOME</span>/.bashrc
<span class="hljs-built_in">source</span> <span class="hljs-variable">$HOME</span>/.bashrc
</code></pre>

<div id="%E5%AE%89%E8%A3%85-gogs" class="anchor-wrap"><h2>安装 Gogs<a class="anchor" href="#%E5%AE%89%E8%A3%85-gogs"><span class="octicon octicon-link"></span></a></h2></div>

<p>常用的安装方式：</p>
<pre><code class="language-sh hljs bash"><span class="hljs-comment"># 下载并安装依赖</span>
$ go get -u github.com/gogs/gogs

<span class="hljs-comment"># 构建主程序</span>
$ <span class="hljs-built_in">cd</span> <span class="hljs-variable">$GOPATH</span>/src/github.com/gogs/gogs
$ go build
</code></pre>

<div id="%E6%9E%84%E5%BB%BA-develop-%E5%88%86%E6%94%AF%E7%89%88%E6%9C%AC" class="anchor-wrap"><h3>构建 <code>develop</code> 分支版本<a class="anchor" href="#%E6%9E%84%E5%BB%BA-develop-%E5%88%86%E6%94%AF%E7%89%88%E6%9C%AC"><span class="octicon octicon-link"></span></a></h3></div>

<p>如果您想要安装 <code>develop</code>（或其它）分支版本，则可以通过以下命令：</p>
<pre><code class="language-sh hljs bash">$ mkdir -p <span class="hljs-variable">$GOPATH</span>/src/github.com/gogs
$ <span class="hljs-built_in">cd</span> <span class="hljs-variable">$GOPATH</span>/src/github.com/gogs

<span class="hljs-comment"># 请确保没有使用 “https://github.com/gogs/gogs.git”</span>
$ git <span class="hljs-built_in">clone</span> --depth=<span class="hljs-number">1</span> -b develop https://github.com/gogs/gogs
$ <span class="hljs-built_in">cd</span> gogs
$ go build
</code></pre>

<div id="%E6%B5%8B%E8%AF%95%E5%AE%89%E8%A3%85" class="anchor-wrap"><h3>测试安装<a class="anchor" href="#%E6%B5%8B%E8%AF%95%E5%AE%89%E8%A3%85"><span class="octicon octicon-link"></span></a></h3></div>

<p>您可以通过以下方式检查 Gogs 是否可以正常工作：</p>
<pre><code class="language-sh hljs bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">$GOPATH</span>/src/github.com/gogs/gogs
./gogs web
</code></pre>

<p>如果您没有发现任何错误信息，则可以使用 <code>Ctrl-C</code> 来终止运行。</p>

<div id="%E4%BD%BF%E7%94%A8%E6%A0%87%E7%AD%BE%E6%9E%84%E5%BB%BA" class="anchor-wrap"><h3>使用标签构建<a class="anchor" href="#%E4%BD%BF%E7%94%A8%E6%A0%87%E7%AD%BE%E6%9E%84%E5%BB%BA"><span class="octicon octicon-link"></span></a></h3></div>

<p>Gogs 默认并没有支持一些功能，这些功能需要在构建时明确使用构建标签（<a href="https://golang.org/pkg/go/build/#hdr-Build_Constraints">build tags</a>）来支持。</p>

<p>目前使用标签构建的功能如下：</p>

<ul>
<li><code>sqlite3</code>：SQLite3 数据库支持</li>
<li><code>pam</code>：PAM 授权认证支持</li>
<li><code>cert</code>：生成自定义证书支持</li>
<li><code>miniwinsvc</code>：Windows 服务内置支持（或者您可以使用 NSSM 来创建服务）</li>
</ul>

<p>例如，您需要支持以上所有功能，则需要先删除 <code>$GOPATH/pkg/{GOOS_GOARCH}/github.com/gogs/gogs</code> 目录，然后执行以下命令：</p>
<pre><code class="language-sh hljs bash">$ go get -u -tags <span class="hljs-string">"sqlite pam cert"</span> github.com/gogs/gogs
$ <span class="hljs-built_in">cd</span> <span class="hljs-variable">$GOPATH</span>/src/github.com/gogs/gogs
$ go build -tags <span class="hljs-string">"sqlite pam cert"</span>
</code></pre>

<p>安装完成后可继续参照 <a href="https://gogs.io/docs/installation/configuration_and_run.html">配置与运行</a>。</p>

			</div>

			
		</div>
	</div>

	<div class="ui inverted vertical footer segment">
  <div class="ui container">
    <div class="ui stackable inverted divided equal height stackable grid">
      <div class="three wide column">
        <h4 class="ui inverted header">关于</h4>
        <div class="ui inverted link list">
          <a class="item" href="https://gogs.io/donate">捐赠我们</a>
          <a class="item" href="https://discuss.gogs.io/">用户论坛</a>
          <a class="item" href="http://eepurl.com/bvu3Xb">订阅新闻邮件</a>
        </div>
      </div>
      <div class="three wide column">
        <h4 class="ui inverted header">项目相关</h4>
        <div class="ui inverted link list">
          <a class="item" href="https://gogs.io/docs">使用文档</a>
          <a class="item" href="https://github.com/gogs/gogs/issues">提交工单</a>
        </div>
      </div>
      <div class="three wide column">
        <h4 class="ui inverted header">联系我们</h4>
        <div class="ui inverted link list">
          <a class="item" target="_blank" href="https://github.com/gogs">GitHub</a>
          <a class="item" target="_blank" href="https://twitter.com/GogsHQ">Twitter</a>
          <a class="item" target="_blank" href="http://weibo.com/gogschina">新浪微博</a>
        </div>
      </div>
      <div class="three wide column">
        <h4 class="ui inverted header">赞助商</h4>
        <div class="ui inverted link list">
          <a target="_blank" href="https://www.keycdn.com/"><img src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/keycdn.svg" width="100%"></a>
        </div>
      </div>
      <div class="four wide column">
        <a target="_blank" href="https://www.digitalocean.com/"><img src="%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85%20-%20Gogs_files/digitalocean.png" width="100%"></a>
      </div>
      <div class="row">
        <div class="sixteen wide column">
        </div>
      </div>
      <div class="row">
        <div class="center column">
          @ 2018 Gogs. 网站基于 <a href="https://github.com/Unknwon/peach">Peach</a> 构建且 Logo 由 <a href="https://twitter.com/egonelbre">Egon Elbre</a> 设计.
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-40109089-8', 'auto');
  ga('send', 'pageview');

</script>

	
</body></html>